// main: ../main.scss

// thread subscribe/unsubscribe button
@each $prefix, $color, $width in (subscribe, green, initial),
                                 (unsubscribe, red, 89px) {
  #REScommentSubToggle {
    &[title^="#{$prefix}"] {
      @include flat-button-colored-text(10, 10, get-color("#{$color}", "500"));
      width: $width;
    }
  }

  .res-nightmode #REScommentSubToggle {
    &[title^="#{$prefix}"] {
      @include flat-button-colored-text(10, 10, get-color("#{$color}", "500"), true);
      width: $width;
    }
  }
}

.res-nightmode .commentarea {
  .menuarea {
    @include card(13, 1, $dark-cards, true);

    .spacer + .spacer form {
      @include default-flat-button(13, 13, true);
    }

    .toggle a { color: $dark-secondary-text; }
  }

  &> .usertext {
    @include animate-card(13, 1, $dark-cards, true);
  }
}

.commentarea {
  position: relative;

  .panestack-title,
  .menuarea {
    margin: 0;
    width: 100%;
  }

  // # of comments and thread subscribe button
  .panestack-title {
    position: absolute;
    padding: 16px 0 0 16px;
    width: auto;
    border: 0;

    .title { margin: 0; }
  }

  // increases padding on main comments page (vs permalink comment page)
  .panestack-title ~ .menuarea {
    padding-top: em(60, 13);
  }

  // sorted/navigate by
  .menuarea {
    margin-bottom: em(17, 13);
    @include card(13, 1);

    .spacer + .spacer {
      display: block;
      @include calc(width, "100% - 32px");

      form {
        @include default-flat-button(13, 13);

        &:first-of-type { margin: 0; }
      }

    }

    .toggle a { color: $light-secondary-text; }
  }

  &> .usertext {
    @include margin(null null em(16, 13) 0);
    @include animate-card(13, 1);
  }
}

// "sorted by" menu
.res-nightmode {
  @include menu(lightdrop, 13, 13, 104, true);
}

@include menu(lightdrop, 13, 13, 104);

// offset inline styling
.drop-choices.lightdrop {
  left: unset;

  &.inuse[style*="top"] { top: unset !important; }
}

// "navigate by"
#REScommentNavToggle{
  margin-bottom: 0;

  span:not(:first-of-type) { display: none; }
}

.commentNavSortType {
  padding: 0 em(4, 10);
  font-size: em(10, 13);
}

// text editor container
.usertext-edit {
  width: auto;

  textarea {
    width: 100%;
    margin-bottom: em(9, 14) !important; // override global reddit styles

    @include text-fields();
  }

  // comment style buttons and character counter
  & > .markdownEditor-wrapper { width: auto; } // override inline styling
}

.res-nightmode .commentingAs { color: $dark-secondary-text; }

.commentingAs { color: $light-secondary-text; }

.RESCharCounter {
  position: relative;
  top: em(35, 15);
  left: em(-85, 15);
}

// comment save button bar
.usertext {

  button { margin: 0; } // fuck you RES

  .bottom-area { line-height: em(36, 13); }

  .help-toggle,
  a.reddiquette {
    margin: 0 em(10, 13) 0 0;
    font-size: 13px;
  }
}

.usertext-buttons { height: auto; }

// big editor button...RES PLS
.RESBigEditorPop {
  // i cry evrytim
  margin: 0 !important;
  padding: 0 em(8, 13) !important;
  height: em(36, 13) !important;
  line-height: em(36, 13) !important;
  border: 0 !important;
  background-color: transparent !important;

  &:hover { background-color: rgba(get-color("grey", "500"), 0.2) !important; }

	&:focus:not(:active) { background-color: rgba($black, 0.12) !important; }

  &:active { background-color: rgba(get-color("grey", "500"), 0.4) !important; }
}

// big editor modal
.res-nightmode #BigEditor {
  .RESDialogSmall {

    h3 {
      color: set-text-color($primary, text);
      background-color: $primary;
    }
  }
}

#BigEditor {

  .RESDialogSmall {
    border: 0;
    border-radius: 2px;
    @include drop-shadow(2);

    h3 {
      height: 38px;
      color: set-text-color($primary, text);
      background-color: $primary;
    }

    .md h3 { height: unset; }

    textarea {
      @include text-fields();
    }
  }
}

.res-nightmode .gold-accent.comment-visits-box .title::after {
  @include dropdown-arrow(true);
}

.gold-accent.comment-visits-box {
  width: 100%;
  max-width: unset;
  margin: 0 0 em(16, 10) 0;
  color: $light-text;
  border: 0;
  @include card(10, 1, get-color("yellow", "50"));

  .title::after {
    display: inline-block;
    margin-left: em(-19, 13);
    content: "";
    vertical-align: middle;
    @include dropdown-arrow;
	}
}

#comment-visits { width: em(167, 13); }

.res-nightmode .linkinfo {
  color: $dark-text !important;
  @include animate-card(13, 1, $light-accent, true);

  .shortlink input {
    color: $dark-text;
    background-color: $dark-app-bar;
  }
}

.linkinfo {
  position: relative;
  top: em(-85, 13);
  border: 0;
  color: $light-text;
  font-size: em(13, 10);
  @include animate-card(13, 1, $light-accent);

  .shortlink input { width: unset; }
}

@media (min-width: $screen-sm-min) {
  .RESCharCounter {
    position: initial;
    top: initial;
    left: initial;
  }
}

// infobar when viewing specific permalinked comments
.infobar {
  margin: 0 0 16px;
  padding: 16px;
  border: 0;
  border-radius: 2px;
  @include drop-shadow(1);
}

.res-nightmode .res .comment,
.res-nightmode .comment {
  @include card(10, 1, $dark-cards, true);
}

.res .comment,
.comment {
  @include card(10, 1);
  margin: 0 0 16px;
  @include transition-default;

  &:hover { @include drop-shadow(3); }

  .md p {
    margin: 15px 0;
  }

  .child {
    border: 0;

    .usertext-buttons {
      margin-bottom: 16px;
    }
  }
}

// .commentarea .sitetable .comment {
//   background-color: $black;
// }
.parent ~ .child .comment {
  // background-color: red;
  @include margin(em(16, 10) 0 0 0);
}

// odd
.commentarea .comment .comment .comment,
.commentarea .comment .comment .comment .comment .comment,
.commentarea .comment .comment .comment .comment .comment .comment .comment,
.commentarea .comment .comment .comment .comment .comment .comment .comment .comment .comment,
.commentarea .comment .comment .comment .comment .comment .comment .comment .comment .comment .comment .comment {
  background-color: $white;
}

// even
.commentarea .comment .comment,
.commentarea .comment .comment .comment .comment,
.commentarea .comment .comment .comment .comment .comment .comment,
.commentarea .comment .comment .comment .comment .comment .comment .comment .comment,
.commentarea .comment .comment .comment .comment .comment .comment .comment .comment .comment .comment,
.commentarea .comment .comment .comment .comment .comment .comment {
  background-color: $light-background;
}

// wtf RES??????????????????

.res .commentarea .comment .comment {
	background-color: $light-background !important;
}
.res .commentarea .comment .comment .comment .comment {
	background-color: $light-background !important;
}
.res .commentarea .comment .comment .comment .comment .comment .comment {
	background-color: $light-background !important;
}
.res .commentarea .comment .comment .comment .comment .comment .comment .comment .comment {
	background-color: $light-background !important;
}
.res .commentarea .comment .comment .comment .comment .comment .comment .comment .comment .comment .comment {
	background-color: $light-background !important;
}

// comment shading behind new comments
.new-comment .usertext-body {
  margin: 15px 0;
  border-color: transparent;
}

.linklisting .md,
.commentarea .md {
  border: 0 !important;
}