// main: ../../main.scss

// post rank
.rank { display: none; }

// vote arrow/score column & thumbnail margin
.midcol {
	position: relative; // need for placing pseudo element BEHIND vote arrow
	z-index: 1;
	@include margin(null em(16, 13) null 0);
	width: em(32, 13) !important;
}

.res-nightmode .link .arrow,
.res-nightmode .reddit-link .arrow,
.res-nightmode .comment .arrow {
	height: em(23, 13) !important;
	width: em(23, 13) !important;

	&:hover::before { background-color: $dark-disabled-text; }

	&::before {	background-color: $dark-divider-text;	}

	&.upmod,
	&.up {
		background: url(%%upvote-night%%) !important;
	}

	&.downmod,
	&.down {
		background: url(%%downvote-night%%) !important;
	}
}

// styles nightmode AND default mode vote arrows
.res-nightmode .link .arrow,
.res-nightmode .reddit-link .arrow,
.res-nightmode .comment .arrow,
.arrow {
	&.upmod::before {	background-color: $upvote; }

	&.downmod::before { background-color: $downvote; }
}

// default arrow styles -- also affects sidebar vote arrows
.arrow,
.arrow::before {
	height: em(23, 13);
	width: em(23, 13);
}

.arrow {
	&:hover::before {	background-color: $light-disabled-text;	}

	&::before {
		position: absolute;
		z-index: -1;
		content: " ";
		background-color: $light-divider-text;
		border-radius: 50%;
		@include transition-default;
	}

	&.upmod,
	&.up {
		background: url(%%upvote%%);
	}

	&.downmod,
	&.down {
		background: url(%%downvote%%);
	}
}

.res-nightmode #siteTable {
	background-color: $dark-background;

	.score.unvoted { color: $dark-disabled-text !important; }

	&>.thing {
		@include card(10, 1, $dark-cards, true);

		.title {
			color: $link-color !important;

	    &:hover { color: $link-color-hover !important; }

	    &:active { color: $link-color-active !important; }

	    &:visited { color: $link-color-visited !important; }
		}

		.domain,
		.domain a,
		.tagline {
			color: $dark-secondary-text !important;
		}
	}

}

#siteTable {
	@include drop-shadow(1);
	background-color: $light-cards;

	// aligns score between new arrows
	.score {

		&.unvoted { color: $light-disabled-text; }

		&.likes { color: $upvote; }

		&.dislikes { color: $downvote; }
	}

	&>.likes .score,
	&>.dislikes .score,
	&>.thing .score {
		position: relative;
		height: 100%;
		padding: em(3, 14) 0;
		font-size: 14px;
		line-height: 1;
	}

	// individual post listings
	&>.thing {
		@include card();
		height: auto !important;
		margin: 0;
		border-bottom: 1px solid $light-divider-text;

		// RES active post highlight
		&.RES-keyNav-activeThing {
			@include card(10, 0, $light-app-bar);
		}

		.entry.RES-keyNav-activeElement {
			background-color: transparent !important;
		}

		// post title
		.title {
			color: $link-color;
			line-height: 1.35;
			margin: 0;

			&:hover { color: $link-color-hover; }
			&:active { color: $link-color-active; }
			&:visited { color: $link-color-visited; }
		}

		.domain,
		.domain a,
		.tagline {
			color: $light-secondary-text;
		}
	}
}

// color of post score
.thing .link .score {

	&.likes { color: $upvote; }

	&.dislikes { color: $downvote; }
}

// thumbnail
.res-nightmode .thumbnail {
	border: em(1, 10) solid $dark-secondary-text !important;

	&.self,
	&.default {
		opacity: 0.5;

		&:hover { opacity: 1; }
	}

	&.self {
		background: url(%%thumbnail-self-night%%) !important;
	}

	&.default {
		background: url(%%thumbnail-default-night%%) !important;
	}
}

.thumbnail {
	border: em(1, 10) solid $light-secondary-text;
	border-radius: 50%;
	font-size: inherit;
	margin: 0 em(16, 10) 0 0;
	max-height: em(70, 10);

	img {
		height: em(70, 10);
		width: auto;
	}

	&.self,
	&.default {
		@extend .thumbnail;
		height: em(70, 10);
		width: em(70, 10);
		opacity: 0.38;

		&:hover { opacity: 0.5; }
	}

	&.self {
		background: url(%%thumbnail-self%%);
	}

	&.default {
		background: url(%%thumbnail-default%%);
	}
}

// nsfw thumbnail styling
.res-nightmode .thing.over18 > .thumbnail.self {
	background: url(%%nsfw%%) !important;
	border-color: $nsfw !important;
	opacity: 0.5;

	&:hover {
		opacity: 1;
	}
}

.thing.over18 > .thumbnail.self {
	background: url(%%nsfw%%);
	border-color: $nsfw;
	opacity: 0.38;

	&:hover { opacity: 0.5; }
}

// mod approved post
.domain,
.approval-checkmark {
	float: right;
}

// media and self post expansion buttons
.res-nightmode .expando-button {
	border: em(1, 10) solid $dark-hint-text;

	&:hover {
		border-color: $dark-secondary-text;
	}

	&.collapsed,
	&.collapsed:hover,
	&.expanded,
	&.expanded:hover {

		&:before,
		&:after {
			background-color: $white;
		}
	}

	// video expandos
	&.video {

		&.collapsed,
		&.collapsed:hover,
		&.expanded,
		&.expanded:hover {
			background: url(%%play-night%%) !important;
		}
	}

	// image expandos
	&.image {
		box-sizing: unset; // to force width and height to 25px

		&.collapsed,
		&.collapsed:hover,
		&.expanded,
		&.expanded:hover {
			background: url(%%camera-night%%) !important; // ;_; thx res
		}
	}

	// self expandos
	&.selftext {

		&.collapsed,
		&.collapsed:hover,
		&.expanded,
		&.expanded:hover {
			background: url(%%text-night%%) !important;
		}
	}
}

.expando-button {
	position: relative;
	top: em(2, 10);
	width: em(25, 10);
	height: em(25, 10);
	z-index: 1;
	@include margin(null em(6, 10) em(6, 10) null);
	border: em(1, 10) solid $light-hint-text;
	border-radius: em(2, 10);
	cursor: pointer;

	&:hover {
		border-color: $light-secondary-text;
	}

	&.collapsed,
	&.collapsed:hover,
	&.expanded,
	&.expanded:hover {

		&:before,
		&:after {
			background-color: $black;
			content: "";
			position: absolute;
			display: block;
		}

		// horizontal
		&:before {
			width: em(7, 10);
			height: em(1, 10);
			top: em(17, 10);
			left: em(14, 10);
		}

		// vertical
		&:after {
			width: em(1, 10);
			height: em(7, 10);
			top: em(14, 10);
			left: em(17, 10);
		}
	}

	// animate expand/collapse
	&.collapsed:after,
	&.expanded:after { @include transition-default; }

	&.collapsed:after { @include animation(minustoplus 0.5s ease 1); }

	&.expanded:after {
		@include animation(minustoplus 0.5s ease 1 reverse);
		transform: rotate(90deg);
	}

	// video expandos
	&.video {

		&.collapsed,
		&.collapsed:hover,
		&.expanded,
		&.expanded:hover {
			background: url(%%play%%);
		}
	}

	// image expandos
	&.image {
		box-sizing: unset; // to force width and height to 25px

		&.collapsed,
		&.collapsed:hover,
		&.expanded,
		&.expanded:hover {
			background: url(%%camera%%) !important; // ;_; thx res
		}
	}

	// self expandos
	&.selftext {

		&.collapsed,
		&.collapsed:hover,
		&.expanded,
		&.expanded:hover {
			background: url(%%text%%);
		}
	}
}

.self .expanded ~ .expando .usertext-body {
	@include animation(0.2s slide-down $animation-curve-default forwards);
}

.tagline,
.flat-list.buttons {
	font-size: em(12, 10);
}

// "submitted by"
.tagline { margin: em(8, 12) 0; }

// target only taglines where expandos are also present
.expando-button ~ .tagline {
	position: relative;
	left: em(2, 12);
	top: em(9, 12);
	margin: 0;
	z-index: 0;
}

.flat-list.buttons {
	clear: left;
	left: em(-1, 12);
	position: relative;

	li { line-height: em(14, 12); }
}

// selftext body
.res-nightmode .link .usertext-body .md {
	border-color: $dark-secondary-text;
}

.link .usertext-body .md {
	background-color: $light-background;
	border-color: $light-secondary-text;
	border-radius: em(2, 14);
}

// nsfw stamp
.stamp {
	padding: 0;
	border: 0 !important;
}

.entry .buttons li.nsfw-stamp,
.nsfw-stamp acronym {
	border: 0 !important; // ;_; thx reddit css
	border-radius: em(2, 12);
	background-color: $nsfw;
	color: $white;
	font-size: em(12, 12);
	font-weight: bold;
	line-height: 0;
	padding: 0 em(2, 12);
}

.res-nightmode .entry .buttons li a {	color: $dark-secondary-text; }

.entry .buttons li a {	color: $light-secondary-text; }

.error {	color: $error; }
