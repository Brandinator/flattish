// main: ../main.scss

.side,
.side:not(#search_hidemore),
.side *:not(#searchexpando) { @include transition-default; }

// hide sidebar items
.side * { opacity: 0; }

.res-nightmode .side::before {
	background: url(%%kebab-night%%) no-repeat;
}

.side {
	position: absolute;
	right: em(16, 10);
	height: 0;
	width: 0;
	margin: 0;
	padding-top: em(85, 10);
	z-index: 9999;
	background-color: transparent !important;

	// first card (containing search and submit)
	.spacer {
		margin: 0 0 em(15, 10);

		&:first-of-type {
			position: relative;
			top: em(-85, 10);
			height: 0;
			width: 0;
		}
	}

	// kebab menu
	&::before {
    position: fixed;
    top: em(215, 10);
    right: 0;
    display: block;
    height: em(36, 10);
    width: em(36, 10) + 1.5em;
		z-index: 999;
    content: "";
    background: url(%%kebab%%) no-repeat;
    opacity: 0.25;
		@include transition-default;
	}

	&:hover {
		height: 100%;
		width: em(330, 10);
		margin-left: 0;

		// show hidden sidebar items
		*:not(.arrow) {
			opacity: 1;
		}

		// make kebab disappear on hover
		&:before {
			opacity: 0;
		}

		// change width of submit buttons on sidebar hover
		.submit-link,
		.submit-text {
			width: em(146, 10);
		}

		// change width of first card (containing search and submit) on sidebar hover
		.spacer:first-of-type {
			height: em(71, 10);
			width: em(330, 10);
		}
	}

	.spacer:first-of-type,
	#ad_sponsorship,
	.titlebox,
	#moderation_tools,
	#ad_main,
	.sidecontentbox {
		font-size: 100%;
		@include animate-card();
	}

	// sponsorship box & advertisement
	#ad_sponsorship {
		position: relative;
		top: -84px;
	}

	#ad_sponsorship,
	#ad_main {
		width: em(330, 10);
	}

	// hide create subreddit button and account activity div
	.sidebox.create,
	.account-activity-box {
		display: none;
	}
}

// login form
@import "sidebar/login";

// place cards beneath sidebar boxes
.res-nightmode .side .spacer:first-of-type,
.res-nightmode .side #ad_sponsorship,
.res-nightmode .side .titlebox,
.res-nightmode .side #moderation_tools,
.res-nightmode .side #ad_main,
.res-nightmode .side .sidecontentbox {
	@include animate-card(10, 1, $light-cards, true);
}

// search
@import "sidebar/search";

// submit buttons
@import "sidebar/submit";

// titlebox
@import "sidebar/titlebox";

// sidecontentbox
@import "sidebar/sidecontentbox";

@media (min-width: $screen-md-min) {
	.side {
		position: static;
		height: 100%;
		width: em(330, 10);

		* { opacity: 1; }

		// hide kebab menu icon
		&:before { display: none; }

		// change width of first card (containing search and submit)
		.spacer:first-of-type {
			position: relative;
			top: em(-85, 10);
			right: 0;
			height: em(71, 10);
			width: em(330, 10);
		}

		#search { width: em(300, 10); }

		.submit-link,
		.submit-text {
			width: em(146, 10);
		}
	}
}